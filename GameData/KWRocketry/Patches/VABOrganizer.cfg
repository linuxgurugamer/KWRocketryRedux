// VABOrganizer strict support for KW Rocketry Redux
// File: GameData/Z_VABOrganizer_Patches/VABOrganizer_KWRocketryRedux_Strict.cfg
// Requires: VABOrganizer, KWRocketry (KW Rocketry Redux installs to GameData/KWRocketry) :contentReference[oaicite:2]{index=2}
//
// Notes:
// - "Strict" = categorize by MODULE/RESOURCE presence (not by titles).
// - Scoped to KW parts by name prefix (KW*) and/or manufacturer text.
//
// If you prefer an even tighter scope (manufacturer-only), tell me what KW uses in your install.

// ------------------------------------------------------------
// Helper scope: KW parts
// ------------------------------------------------------------
@PART[KW*]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	// noop: this block only ensures the selector resolves cleanly
}

// ------------------------------------------------------------
// Engines (liquid)
// ------------------------------------------------------------
@PART[KW*]:HAS[@MODULE[ModuleEngines*],!MODULE[ModuleSolidRocket]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = engines
	}
}

// ------------------------------------------------------------
// Solid Rocket Boosters
// ------------------------------------------------------------
@PART[KW*]:HAS[@MODULE[ModuleSolidRocket]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = srb
	}
}

// ------------------------------------------------------------
// RCS (thrusters + monoprop)
// ------------------------------------------------------------
@PART[KW*]:HAS[@MODULE[ModuleRCS*]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = rcs
	}
}

// ------------------------------------------------------------
// Tanks: LFO
// ------------------------------------------------------------
@PART[KW*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = lfo
	}
}

// ------------------------------------------------------------
// Tanks: LiquidFuel-only
// ------------------------------------------------------------
@PART[KW*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!RESOURCE[MonoPropellant]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = lf
	}
}

// ------------------------------------------------------------
// Tanks: Monopropellant
// ------------------------------------------------------------
@PART[KW*]:HAS[@RESOURCE[MonoPropellant]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = monoprop
	}
}

// ------------------------------------------------------------
// Decouplers / Separators
// ------------------------------------------------------------
@PART[KW*]:HAS[@MODULE[ModuleDecouple]|@MODULE[ModuleAnchoredDecoupler]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = decouplers
	}
}

// ------------------------------------------------------------
// Fairings (stock procedural or SAF variants)
// ------------------------------------------------------------
@PART[KW*]:HAS[@MODULE[ModuleProceduralFairing]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = fairings
	}
}

// Some KW installs/patches use SimpleAdjustableFairings module names
@PART[KW*]:HAS[@MODULE[SimpleAdjustableFairing]|@MODULE[ModuleSimpleAdjustableFairing]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = fairings
	}
}

// ------------------------------------------------------------
// Nose cones / aerodynamic caps (no resources, and uses lifting/drag aero modules)
// ------------------------------------------------------------
@PART[KW*]:HAS[!RESOURCE[*],@MODULE[ModuleLiftingSurface]|@MODULE[ModuleControlSurface]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = noses
	}
}

// ------------------------------------------------------------
// Adapters (structural or fuel adapters; catches common adapter modules)
// ------------------------------------------------------------
@PART[KW*]:HAS[@MODULE[ModuleStructuralAdapter]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = adapters
	}
}

// ------------------------------------------------------------
// Structural (KW plates, interstages, etc.) â€” no resources, no engine, no decouple, no fairing
// ------------------------------------------------------------
@PART[KW*]:HAS[!RESOURCE[*],!MODULE[ModuleEngines*],!MODULE[ModuleSolidRocket],!MODULE[ModuleDecouple],!MODULE[ModuleAnchoredDecoupler],!MODULE[ModuleProceduralFairing],!MODULE[SimpleAdjustableFairing],!MODULE[ModuleSimpleAdjustableFairing]]:NEEDS[VABOrganizer,KWRocketry]:AFTER[VABOrganizer]
{
	%VABORGANIZER
	{
		%organizerSubcategory = structural
	}
}
